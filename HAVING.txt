// Used in conjunction with GROUP BY
// WHERE can be used to filter only non aggregate 
// HAVING is used to filter aggregate after GROUP BY

SELECT customer_id,SUM(amount) FROM payment WHERE customer_id NOT IN (184,87) GROUP BY customer_id

// if we want to filter on the basis of customer use WHERE but on the basis of SUM(amount) cant use WHERE so use HSVING
// invalid SELECT customer_id,SUM(amount) FROM payment GROUP BY customer_id WHERE SUM(amount) = 100

SELECT store_id,COUNT(customer_id) FROM customer GROUP BY store_id
SELECT store_id,COUNT(customer_id) FROM customer GROUP BY store_id HAVING COUNT(customer_id) > 300

// CHALLANGE

SELECT customer_id,COUNT(amount) FROM payment GROUP BY customer_id HAVING COUNT(amount)>=40
SELECT customer_id,SUM(amount) FROM payment WHERE staff_id = 2 GROUP BY customer_id HAVING SUM(amount) > 100